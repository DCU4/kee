
<%- include('partials/header',{savedBtn:false}) %>
  

        <div class="saved">
                <div class="notes-container" >

                    <%
                    var dateCreated = [];
                    var yearCreated = [];
                    var month = [];
                    month[0] = "January";
                    month[1] = "February";
                    month[2] = "March";
                    month[3] = "April";
                    month[4] = "May";
                    month[5] = "June";
                    month[6] = "July";
                    month[7] = "August";
                    month[8] = "September";
                    month[9] = "October";
                    month[10] = "November";
                    month[11] = "December";
                    var months = [];
                    kees.forEach(function(kee){
                        dateCreated.push(kee.created);
                        yearCreated.push(kee.created.getFullYear());
                        months.push(month[kee.created.getMonth()]);
                        
                        // console.log(kee.created);
                        
                    });
                    var years = [...new Set(yearCreated)];
                    // var mons = [...new Set(months)];
                    // var days = [...new Set(date)];
                    years.reverse();
                    
                    // days.reverse();

                    years.forEach(function(year,y) { 

                      // if created month is in year, create new Set

                      var mons = [...new Set(months)];
                    mons.reverse();
                    console.log('months:',mons);
                   
                      
                          %>
                        
                        <p class="year"><%= year %></p>
                        

                      <% 

                      mons.forEach(function(m,i){
                          console.log(m);
                          // if (m){
                      %>
                        <p class="date"> <%= m %> </p>

                  <div class="notes">
                    <% 
                          
                    kees.reverse();
                    kees.forEach(function(kee, i){
                    // date.push(kee.created.toDateString());
                    // months.push(month[kee.created.getMonth()]);
                    // // console.log(kee.created);
                    // yearCreated.push(kee.created.getFullYear());

                    // var years = [...new Set(yearCreated)];

                    
                    // var days = [...new Set(date)];
                    // console.log(kee.created.getFullYear());
                    // let year = kee.created.getFullYear();
                    // console.log(year);
                    // years.forEach(function(year,y){
                      
                      // if (year == kee.created.getFullYear()) { 
  //                       const isNoteCreated = (c) => c == kee.created.getFullYear();
  // // console.log(isNoteCreated);
  // // console.log(years,kee.created.getFullYear());
  //                       // if(years.includes(kee.created.getFullYear())) {
  //                         let check = yearCreated.some(isNoteCreated);
                          
                        //   if (check) {
                        // console.log(mons);
                        // console.log(years,i)
                        // years.forEach(function(year,y) {
                          console.log(m,kee.created.getMonth());

                       if(year == kee.created.getFullYear() && m == month[kee.created.getMonth()]) {
                        
                        %>
                    <p> </p>

                    <% 
                  
                     //for each day in days, display all of the notes for that day

                    //   if (kee.created.toDateString() === days[d]) {
                    // console.log(mon,month[kee.created.getMonth()],kee.created.getMonth(),m);
                    // && year == kee.created.getFullYear()
                    // if(month[kee.created.getMonth()] == mon  ) {
                  //  console.log(days[d],kee.created.toDateString(),d);
                      // if(kee.image){
                        // console.log
                    %>

                        <a id="mySavedImg<%= kee._id %>" href="/saved/<%= kee._id %>">
                            <img data-lazy="<%= kee.image %>" crossorigin="anonymous" class="saved-image" src="" />
                        </a>

                    <% } });  %>
                    </div>
                <%   
                }); });
                
                %>

            </div>


        </div>

<% include partials/footer %>